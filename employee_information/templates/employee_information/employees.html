{% extends "employee_information/base.html" %}

{% block pageContent %}
<div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-12">
    <div class="mdc-card py-2">
        <div class="d-flex justify-content-between align-items-center">
            <h4 class="card-title mb-0">Customer Conversion</h4>
            <div class="text-start">
                <div class="form-group">
                    
                </div>
            </div>
        </div>
        
    </div>
</div>

<div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-12">
    <div class="mdc-card">
        <!-- Filter Section -->

        <style>
            label {
                margin-bottom: 10px;
                font-size: 12px;
                display: inline-block;
                margin-right: 20px; /* Adjust the value for spacing between labels */
            }
        
            input[type="date"], input[type="text"] {
                width: 200px; /* Adjust the value for the desired width */
                padding: 5px; /* Adjust the value for padding */
                line-height: 1.5; /* Adjust the value for line height */
            }
        </style>

        <form id="flight">
            <div class="filter-section">
                <label>
                    Start Date <br/>
                    <input type="date" name="arrival" value="Today"/>
                </label>

                <label>
                    End Date <br/>
                    <input type="date" name="arrival" value="Today"/>
                </label>

                <label>
                    Stores <br/>
                    <input type="text" name="stores" placeholder="Multiple Stores"/>
                </label>

                <label>
                    <input type="checkbox" name="inclusiveInactiveStores"/>
                    Inclusive Inactive Stores
                </label>
            </div>
        </form>

        <div class="additional-section">
            <!-- Additional content goes here -->
        </div>

        <div class="d-flex justify-content-end p-3">
            <button class="btn btn-primary btn-large" style="background-color: rgb(39, 39, 117); color: white;" onclick="downloadReport()">Generate Report</button>

            <button class="btn btn-danger btn-large ml-2" onclick="downloadReport()"> â†“ </button>
        </div>
    </div>
</div>

        
        


        <div  class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-12">
    <div class="mdc-card">



            <!-- Table for Store -->
          
                <style>
                    .mr-custom {
                        margin-right: 20px; /* Adjust the value to increase or decrease the right margin */
                    }
                </style>
                
            
                
                
                
                
                    <table class="table table-bordered">
                        <colgroup>
                            <col width="100%">
                            <col width="100%">
                            <col width="100%">
                            <col width="100%">
                            <col width="100%">
                            <col width="100%">
                            <col width="100%">
                            <col width="100%">
                            <col width="100%">
                            <col width="100%">

                        </colgroup>
        <!-- Table Section -->
        
                <colgroup>
                    <!-- Add colgroups as per your requirements -->
                </colgroup>
                <thead>
                    <tr>
                
                        <th class="text-center py-1">Name</th>
                        <th class="text-center py-1">Traffic</th>
                        <th class="text-center py-1">Boxes</th>
                        <th class="text-center py-1">Conversion</th>
                        <th class="text-center py-1">Unmonitored Boxes</th> 
                        <th class="text-center py-1">Gross Profit ($)</th>
                        <th class="text-center py-1">Gross Profit / Traffic</th>
                        <th class="text-center py-1">Unmonitored Gross Profit</th>
                        <th class="text-center py-1">Total Gross Profit</th>
                        <th class="text-center py-1">Monitored Percentage</th>
                    </tr>
                </thead>
                <tbody id="employee_table_body">
                    <tr>
                        <td class="px-2 py-1 text-start">Region</td>
                        <td class="px-2 py-1 text-start">215360</td>
                        <td class="px-2 py-1 text-start">62631</td>
                        <td class="px-2 py-1 text-start">28.96%</td>
                        <td class="px-2 py-1 text-start">397</td>
                        <td class="px-2 py-1 text-start">$ 8,722,659.67</td>
                        <td class="px-2 py-1 text-start">$ 40.50 </td>
                        <td class="px-2 py-1 text-start">$ 53,469.98</td>
                        <td class="px-2 py-1 text-start">$8,776,129.65</td>
                        <td class="px-2 py-1 text-start">99.45%</td>
                    </tr>

                    <tr>
                        <td class="px-2 py-1 text-start">District</td>
                        <td class="px-2 py-1 text-start">39303</td>
                        <td class="px-2 py-1 text-start">12194</td>
                        <td class="px-2 py-1 text-start">31.03%</td>
                        <td class="px-2 py-1 text-start">83</td>
                        <td class="px-2 py-1 text-start">$ 1,719,046.79</td>
                        <td class="px-2 py-1 text-start">$ 43.74 </td>
                        <td class="px-2 py-1 text-start">$ 12,352.74</td>
                        <td class="px-2 py-1 text-start">$1,731,399.53</td>
                        <td class="px-2 py-1 text-start">98.28%</td>
                    </tr>
                    

                    <tr>
                        <td class="px-2 py-1 text-start">Store</td>
                        <td class="px-2 py-1 text-start">5990</td>
                        <td class="px-2 py-1 text-start">1827</td>
                        <td class="px-2 py-1 text-start">30.50%%</td>
                        <td class="px-2 py-1 text-start">4</td>
                        <td class="px-2 py-1 text-start">$ 272,889.21</td>
                        <td class="px-2 py-1 text-start">$ 45.56 </td>
                        <td class="px-2 py-1 text-start">$ 398.89</td>
                        <td class="px-2 py-1 text-start">$273,288.19</td>
                        <td class="px-2 py-1 text-start">99.64%</td>
                    </tr>

                    

                    <tr>
                        <td class="px-2 py-1 text-start">Employee 1</td>
                        <td class="px-2 py-1 text-start">311</td>
                        <td class="px-2 py-1 text-start">81</td>
                        <td class="px-2 py-1 text-start">26.05%</td>
                        <td class="px-2 py-1 text-start">0</td>
                        <td class="px-2 py-1 text-start">$ 10,768.33</td>
                        <td class="px-2 py-1 text-start">$ 34.62 </td>
                        <td class="px-2 py-1 text-start">$ 0.00%</td>
                        <td class="px-2 py-1 text-start">$10,768.33</td>
                        <td class="px-2 py-1 text-start">100.00%%</td>
                    </tr>
                    

                    <tr>
                        <td class="px-2 py-1 text-start">Employee 2</td>
                        <td class="px-2 py-1 text-start">1176</td>
                        <td class="px-2 py-1 text-start">351</td>
                        <td class="px-2 py-1 text-start">29.85%</td>
                        <td class="px-2 py-1 text-start">0</td>
                        <td class="px-2 py-1 text-start">$ 53,963.67</td>
                        <td class="px-2 py-1 text-start">$ 45.89 </td>
                        <td class="px-2 py-1 text-start">$ 0.00</td>
                        <td class="px-2 py-1 text-start">$53,963.67</td>
                        <td class="px-2 py-1 text-start">100.00 %</td>
                    </tr>

                    <tr>
                        <td class="px-2 py-1 text-start">Employee 3</td>
                        <td class="px-2 py-1 text-start">695</td>
                        <td class="px-2 py-1 text-start">258</td>
                        <td class="px-2 py-1 text-start">37.12%</td>
                        <td class="px-2 py-1 text-start">0</td>
                        <td class="px-2 py-1 text-start">$ 47,170.22</td>
                        <td class="px-2 py-1 text-start">$ 67.87 </td>
                        <td class="px-2 py-1 text-start">$ 0.00 </td>
                        <td class="px-2 py-1 text-start">$47,170.22</td>
                        <td class="px-2 py-1 text-start">100.00%</td>
                    </tr>


                    <tr>
                        <td class="px-2 py-1 text-start">Employee 4</td>
                        <td class="px-2 py-1 text-start">421</td>
                        <td class="px-2 py-1 text-start">122</td>
                        <td class="px-2 py-1 text-start">28.98%</td>
                        <td class="px-2 py-1 text-start">0</td>
                        <td class="px-2 py-1 text-start">$ 21,230.33</td>
                        <td class="px-2 py-1 text-start">$ 50.43 </td>
                        <td class="px-2 py-1 text-start">$ 0.00</td>
                        <td class="px-2 py-1 text-start">$21,230.33</td>
                        <td class="px-2 py-1 text-start">100.00%</td>
                    </tr>



                    <tr>
                        <td class="px-2 py-1 text-start">Employee 5</td>
                        <td class="px-2 py-1 text-start">474</td>
                        <td class="px-2 py-1 text-start">125</td>
                        <td class="px-2 py-1 text-start">30.19%</td>
                        <td class="px-2 py-1 text-start">0</td>
                        <td class="px-2 py-1 text-start">$ 16,186.92</td>
                        <td class="px-2 py-1 text-start">$ 39.10 </td>
                        <td class="px-2 py-1 text-start">$ 0.00</td>
                        <td class="px-2 py-1 text-start">$16,186.92</td>
                        <td class="px-2 py-1 text-start">100.00%</td>
                    </tr>
                    
                    
                    
                    
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
    $(function() {
        $('#create_new').click(function() {
            uni_modal("Add New Employee", "{% url 'manage_employees-page' %}", 'modal-lg')
        })
        $('.view-data').click(function() {
            uni_modal("Employee Details", "{% url 'view-employee-page' %}?id=" + $(this).attr('data-id'), 'mid-large')
        })
        $('.edit-data').click(function() {
            uni_modal("Edit Employee", "{% url 'manage_employees-page' %}?id=" + $(this).attr('data-id'), 'modal-lg')
        })
        $('.delete-data').click(function() {
            _conf("Are you sure to delete this employee?", "delete_employee", [$(this).attr('data-id')])
        })

        function updateTable(data) {
            $('#employee_table_body').empty();
            for (const employee of data) {
                let row = `<tr>
                    <!-- Add your table columns as per your requirements -->
                </tr>`;
                $('#employee_table_body').append(row);
            }
        }

        function generateReport() {
            let data = [
                // Sample data
            ];

            updateTable(data);
        }

        function downloadReport() {
            let csvContent = "data:text/csv;charset=utf-8,";
            let rows = document.querySelectorAll("table tr");

            rows.forEach(function (row) {
                let rowData = [];
                let cols = row.querySelectorAll("td, th");

                cols.forEach(function (col) {
                    rowData.push(col.innerText);
                });

                csvContent += rowData.join(",") + "\n";
            });

            let encodedUri = encodeURI(csvContent);
            let link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "employee_report.csv");
            document.body.appendChild(link);
            link.click();
        }
    })

    function delete_employee($id) {
        // Your existing delete function
    }
</script>
{% endblock %}
