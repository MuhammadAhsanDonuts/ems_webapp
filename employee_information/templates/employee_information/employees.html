{% extends "employee_information/base.html" %}

{% block pageContent %}
<div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-12">
    <div class="mdc-card py-2">
        <div class="d-flex justify-content-between align-items-center">
            <h4 class="card-title mb-0">Customer Conversion</h4>
            <div class="text-start">
                <div class="form-group">
                    
                </div>
            </div>
        </div>
        
    </div>
</div>

<div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-12">
    <div class="mdc-card">
        <!-- Filter Section -->

        <style>
            label {
                margin-bottom: 10px;
                font-size: 12px;
                display: inline-block;
                margin-right: 20px; /* Adjust the value for spacing between labels */
            }
        
            input[type="date"], input[type="text"] {
                width: 200px; /* Adjust the value for the desired width */
                padding: 5px; /* Adjust the value for padding */
                line-height: 1.5; /* Adjust the value for line height */
            }
        </style>

        <form id="flight">
            <div class="filter-section">
                <label>
                    Start Date <br/>
                    <input type="date" name="arrival" value="Today"/>
                </label>

                <label>
                    End Date <br/>
                    <input type="date" name="arrival" value="Today"/>
                </label>

                <label>
                    Stores <br/>
                    <input type="text" name="stores" placeholder="Multiple Stores"/>
                </label>

                <label>
                    <input type="checkbox" name="inclusiveInactiveStores"/>
                    Inclusive Inactive Stores
                </label>
            </div>
        </form>

        <div class="additional-section">
            <!-- Additional content goes here -->
        </div>

        <div class="d-flex justify-content-end p-3">
            <button class="btn btn-primary btn-large" style="background-color: rgb(39, 39, 117); color: white;" onclick="downloadReport()">Generate Report</button>

            <button class="btn btn-danger btn-large ml-2" onclick="downloadReport()"> â†“ </button>
        </div>
    </div>
</div>

        
        


        <div  class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-12">
    <div class="mdc-card">



            <!-- Table for Store -->
          
                <style>
                    .mr-custom {
                        margin-right: 20px; /* Adjust the value to increase or decrease the right margin */
                    }
                </style>
                
            
                
                
                
                
                    <table class="table table-bordered">
                        <colgroup>
                            <col width="100%">
                            <col width="100%">
                            <col width="100%">
                            <col width="100%">
                            <col width="100%">
                            <col width="100%">
                            <col width="100%">
                            <col width="100%">
                            <col width="100%">
                            <col width="100%">

                        </colgroup>
        <!-- Table Section -->
        
                <colgroup>
                    <!-- Add colgroups as per your requirements -->
                </colgroup>
                <thead>
                    <tr>
                
                        <th class="text-center py-1">Name</th>
                        <th class="text-center py-1">Traffic</th>
                        <th class="text-center py-1">Boxes</th>
                        <th class="text-center py-1">Conversion</th>
                        <th class="text-center py-1">Unmonitored Boxes</th> 
                        <th class="text-center py-1">Gross Profit ($)</th>
                        <th class="text-center py-1">Gross Profit / Traffic</th>
                        <th class="text-center py-1">Unmonitored Gross Profit</th>
                        <th class="text-center py-1">Total Gross Profit</th>
                        <th class="text-center py-1">Monitored Percentage</th>
                    </tr>
                </thead>
                <tbody id="employee_table_body">
                    <tr>
                        <td class="px-2 py-1 text-start">Region</td>
                        <td class="px-2 py-1 text-start">215360</td>
                        <td class="px-2 py-1 text-start">62631</td>
                        <td class="px-2 py-1 text-start">28.96%</td>
                        <td class="px-2 py-1 text-start">787</td>
                        <td class="px-2 py-1 text-start">$ 7,826,3896,727</td>
                        <td class="px-2 py-1 text-start">$ 43.73 </td>
                        <td class="px-2 py-1 text-start">$ 12, 352.74</td>
                        <td class="px-2 py-1 text-start">$1,731,399.53</td>
                        <td class="px-2 py-1 text-start">99.45%</td>
                    </tr>

                    <tr>
                        <td class="px-2 py-1 text-start">District</td>
                        <td class="px-2 py-1 text-start">73774938</td>
                        <td class="px-2 py-1 text-start">35789</td>
                        <td class="px-2 py-1 text-start">29.58%</td>
                        <td class="px-2 py-1 text-start">453</td>
                        <td class="px-2 py-1 text-start">$ 5,678,234</td>
                        <td class="px-2 py-1 text-start">$ 32.11 </td>
                        <td class="px-2 py-1 text-start">$ 8,765.90</td>
                        <td class="px-2 py-1 text-start">$1,234,567.89</td>
                        <td class="px-2 py-1 text-start">98.72%</td>
                    </tr>
                    

                    <tr>
                        <td class="px-2 py-1 text-start">Store</td>
                        <td class="px-2 py-1 text-start">98765</td>
                        <td class="px-2 py-1 text-start">45678</td>
                        <td class="px-2 py-1 text-start">20.34%</td>
                        <td class="px-2 py-1 text-start">654</td>
                        <td class="px-2 py-1 text-start">$ 8,765,432</td>
                        <td class="px-2 py-1 text-start">$ 28.45 </td>
                        <td class="px-2 py-1 text-start">$ 15,432.67</td>
                        <td class="px-2 py-1 text-start">$2,345,678.90</td>
                        <td class="px-2 py-1 text-start">95.81%</td>
                    </tr>

                    

                    <tr>
                        <td class="px-2 py-1 text-start">Employee 1</td>
                        <td class="px-2 py-1 text-start">54321</td>
                        <td class="px-2 py-1 text-start">23456</td>
                        <td class="px-2 py-1 text-start">15.67%</td>
                        <td class="px-2 py-1 text-start">876</td>
                        <td class="px-2 py-1 text-start">$ 4,567,890</td>
                        <td class="px-2 py-1 text-start">$ 21.89 </td>
                        <td class="px-2 py-1 text-start">$ 10,876.54</td>
                        <td class="px-2 py-1 text-start">$987,654.32</td>
                        <td class="px-2 py-1 text-start">91.23%</td>
                    </tr>
                    

                    <tr>
                        <td class="px-2 py-1 text-start">Employee 2</td>
                        <td class="px-2 py-1 text-start">76543</td>
                        <td class="px-2 py-1 text-start">87654</td>
                        <td class="px-2 py-1 text-start">30.45%</td>
                        <td class="px-2 py-1 text-start">321</td>
                        <td class="px-2 py-1 text-start">$ 6,543,210</td>
                        <td class="px-2 py-1 text-start">$ 35.67 </td>
                        <td class="px-2 py-1 text-start">$ 18,765.43</td>
                        <td class="px-2 py-1 text-start">$1,234,567.89</td>
                        <td class="px-2 py-1 text-start">97.15%</td>
                    </tr>

                    <tr>
                        <td class="px-2 py-1 text-start">Employee 3</td>
                        <td class="px-2 py-1 text-start">987654</td>
                        <td class="px-2 py-1 text-start">345678</td>
                        <td class="px-2 py-1 text-start">18.23%</td>
                        <td class="px-2 py-1 text-start">567</td>
                        <td class="px-2 py-1 text-start">$ 9,876,543</td>
                        <td class="px-2 py-1 text-start">$ 29.54 </td>
                        <td class="px-2 py-1 text-start">$ 14,567.89</td>
                        <td class="px-2 py-1 text-start">$2,345,678.90</td>
                        <td class="px-2 py-1 text-start">94.67%</td>
                    </tr>


                    <tr>
                        <td class="px-2 py-1 text-start">Employee 4</td>
                        <td class="px-2 py-1 text-start">234567</td>
                        <td class="px-2 py-1 text-start">87654</td>
                        <td class="px-2 py-1 text-start">25.89%</td>
                        <td class="px-2 py-1 text-start">432</td>
                        <td class="px-2 py-1 text-start">$ 5,432,109</td>
                        <td class="px-2 py-1 text-start">$ 31.76 </td>
                        <td class="px-2 py-1 text-start">$ 11,234.56</td>
                        <td class="px-2 py-1 text-start">$1,987,654.32</td>
                        <td class="px-2 py-1 text-start">96.34%</td>
                    </tr>



                    <tr>
                        <td class="px-2 py-1 text-start">Employee 5</td>
                        <td class="px-2 py-1 text-start">876543</td>
                        <td class="px-2 py-1 text-start">12345</td>
                        <td class="px-2 py-1 text-start">12.67%</td>
                        <td class="px-2 py-1 text-start">789</td>
                        <td class="px-2 py-1 text-start">$ 7,654,321</td>
                        <td class="px-2 py-1 text-start">$ 36.89 </td>
                        <td class="px-2 py-1 text-start">$ 9,876.54</td>
                        <td class="px-2 py-1 text-start">$876,543.21</td>
                        <td class="px-2 py-1 text-start">89.56%</td>
                    </tr>
                    
                    
                    
                    
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
    $(function() {
        $('#create_new').click(function() {
            uni_modal("Add New Employee", "{% url 'manage_employees-page' %}", 'modal-lg')
        })
        $('.view-data').click(function() {
            uni_modal("Employee Details", "{% url 'view-employee-page' %}?id=" + $(this).attr('data-id'), 'mid-large')
        })
        $('.edit-data').click(function() {
            uni_modal("Edit Employee", "{% url 'manage_employees-page' %}?id=" + $(this).attr('data-id'), 'modal-lg')
        })
        $('.delete-data').click(function() {
            _conf("Are you sure to delete this employee?", "delete_employee", [$(this).attr('data-id')])
        })

        function updateTable(data) {
            $('#employee_table_body').empty();
            for (const employee of data) {
                let row = `<tr>
                    <!-- Add your table columns as per your requirements -->
                </tr>`;
                $('#employee_table_body').append(row);
            }
        }

        function generateReport() {
            let data = [
                // Sample data
            ];

            updateTable(data);
        }

        function downloadReport() {
            let csvContent = "data:text/csv;charset=utf-8,";
            let rows = document.querySelectorAll("table tr");

            rows.forEach(function (row) {
                let rowData = [];
                let cols = row.querySelectorAll("td, th");

                cols.forEach(function (col) {
                    rowData.push(col.innerText);
                });

                csvContent += rowData.join(",") + "\n";
            });

            let encodedUri = encodeURI(csvContent);
            let link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "employee_report.csv");
            document.body.appendChild(link);
            link.click();
        }
    })

    function delete_employee($id) {
        // Your existing delete function
    }
</script>
{% endblock %}
