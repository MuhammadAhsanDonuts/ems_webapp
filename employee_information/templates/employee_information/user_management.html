{% extends "employee_information/base.html" %}

{% block pageContent %}
<div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-12">
    <div class="mdc-card py-2">
        <div class="d-flex justify-content-between align-items-center">
            <h4 class="card-title mb-0">User Management</h4>
            <div class="text-start">
                <div class="form-group">
                   
                </div>
            </div>
        </div>
    </div>
</div>





<div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-12">
    <div class="mdc-card">
        <!-- Filter Section -->
        <div style="display: flex; align-items: center;">
            <label for="searchType" style="margin-right: 10px; font-size: 14px;">Search by Store Name:</label>
            <select name="searchType" id="searchType" style="width: 120px; font-size: 14px;" onchange="updateSearchOption()">
                <option value="storeName"> - All- </option>
                <option value="type">Search by Type</option>
                <option value="textInput">Search by Text Input</option>
            </select>
        
            <div id="storeNameOption" class="searchOption" style="margin-left: 20px;">
                <label for="storeName" style="font-size: 14px;">Search by Type:</label>
                <select name="storeName" id="storeName" style="width: 120px; font-size: 14px;">
                    <option value="all">All Active</option>
                </select>
            </div>
        
             <div id="storeNameOption" class="searchOption" style="margin-left: 20px;">
                <label for="storeName" style="font-size: 14px;">Search by Text Input:</label>
                <select name="storeName" id="storeName" style="width: 120px; font-size: 14px;">
                    <option value="all">All Active</option>
                </select>
            </div>
                    
            <button style="margin-left: 20px; font-size: 14px;">Search</button>

            <button style="margin-left: 20px; font-size: 14px;">
                <i class="fas fa-download"></i>
            </button>
            
            

                </div>
        


        
              
            </div>
        
            <!-- Added space with line break -->
        
            <div id="typeOption" class="searchOption" style="margin-left: 20px; display: none;">
                <label for="type" style="font-size: 14px;">Type:</label>
                <select name="type" id="type" style="width: 120px; font-size: 12px;">
                    <option value="all">All Active</option>
                </select>
            </div>
        
            <div id="textInputOption" class="searchOption" style="margin-left: 20px; display: none;">
                <label for="stores" style="font-size: 14px;">Text Input:</label>
                <input type="text" name="stores" id="stores" placeholder="Search" style="width: 120px; font-size: 12px;">
            </div>
        </div>
                
    
            
          
       
        
        
        

        



        
        
        <style>
            .mdc-layout-grid__cell.stretch-card {
                margin-bottom: 0; /* Adjust this value to reduce the bottom margin */
            }
    
            .mdc-card {
                margin-top: 0; /* Adjust this value to reduce the top margin */
            }
        </style>
    


<div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-12">
   
 <div class="mdc-card py-2">
                
    
        

        <div class="table-responsive">
            <table class="table table-striped table-bordered">
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
                
                <form>
                    <div class="d-flex justify-content-end p-3">
                        <button class="btn btn-primary btn-large ml-2" onclick="addNewUser()" style="background-color: #434281; border-color: #001f3f;"> 
                            <i class="fas fa-user"></i> Add New Employee
                        </button>
                    
                    
    
                        
                        
                    </div>
                </form>

                
                
                <colgroup>
                    <!-- Add colgroups as per your requirements -->
                </colgroup>
                <thead>
                    <tr>
                        <th>Employee Id</th>
                        <th>Employee Name</th>
                        <th>Store Name</th>
                        <th>Designation</th>
                        <th>User Name</th>
                        <th>Pseudo Name</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="user_table_body">
                    <tr>
                        <td>1150</td>
                        <td>Smith</td>
                        <td>Store 1</td>
                        <td>Manager</td>
                        <td>Smith</td>
                        <td>Si Yu</td>
                        <td>
                            <a href="#" title="Edit"><i class="fas fa-edit"></i></a>
                            <a href="#" title="Download"><i class="fas fa-download"></i></a>
                            <a href="#" title="Delete"><i class="fas fa-trash-alt"></i></a>
                        </td>
                    </tr>
                    <!-- Add more rows with similar structure and dynamic data -->
                    <tr>
                        <td>1151</td>
                        <td>John</td>
                        <td>Store 2</td>
                        <td>Supervisor</td>
                        <td>JohnDoe</td>
                        <td>J.D.</td>
                        <td>
                            <a href="#" title="Edit"><i class="fas fa-edit"></i></a>
                            <a href="#" title="Download"><i class="fas fa-download"></i></a>
                            <a href="#" title="Delete"><i class="fas fa-trash-alt"></i></a>
                        </td>
                    </tr>
                    <tr>
                        <td>1152</td>
                        <td>Jane</td>
                        <td>Store 3</td>
                        <td>Cashier</td>
                        <td>JaneSmith</td>
                        <td>J.S.</td>
                        <td>
                            <a href="#" title="Edit"><i class="fas fa-edit"></i></a>
                            <a href="#" title="Download"><i class="fas fa-download"></i></a>
                            <a href="#" title="Delete"><i class="fas fa-trash-alt"></i></a>
                        </td>
                    </tr>
                    <tr>
                        <td>1153</td>
                        <td>Mary</td>
                        <td>Store 4</td>
                        <td>Sales Associate</td>
                        <td>MaryJohnson</td>
                        <td>M.J.</td>
                        <td>
                            <a href="#" title="Edit"><i class="fas fa-edit"></i></a>
                            <a href="#" title="Download"><i class="fas fa-download"></i></a>
                            <a href="#" title="Delete"><i class="fas fa-trash-alt"></i></a>
                        </td>
                    </tr>
                    <tr>
                        <td>1154</td>
                        <td>Tom</td>
                        <td>Store 5</td>
                        <td>Security</td>
                        <td>TomSecurity</td>
                        <td>T.S.</td>
                        <td>
                            <a href="#" title="Edit"><i class="fas fa-edit"></i></a>
                            <a href="#" title="Download"><i class="fas fa-download"></i></a>
                            <a href="#" title="Delete"><i class="fas fa-trash-alt"></i></a>
                        </td>



                    </tr>
                </tbody>
            </table>
        </div>
        
            </table>
        </div>
    </div>
</div>

<script>
    $(function() {
        $('#create_new').click(function() {
            uni_modal("Add New Employee", "{% url 'manage_employees-page' %}", 'modal-lg')
        })
        $('.view-data').click(function() {
            uni_modal("Employee Details", "{% url 'view-employee-page' %}?id=" + $(this).attr('data-id'), 'mid-large')
        })
        $('.edit-data').click(function() {
            uni_modal("Edit Employee", "{% url 'manage_employees-page' %}?id=" + $(this).attr('data-id'), 'modal-lg')
        })
        $('.delete-data').click(function() {
            _conf("Are you sure to delete this employee?", "delete_employee", [$(this).attr('data-id')])
        })

        function updateTable(data) {
            $('#employee_table_body').empty();
            for (const employee of data) {
                let row = `<tr>
                    <!-- Add your table columns as per your requirements -->
                </tr>`;
                $('#employee_table_body').append(row);
            }
        }

        function generateReport() {
            let data = [
                // Sample data
            ];

            updateTable(data);
        }

        function downloadReport() {
            let csvContent = "data:text/csv;charset=utf-8,";
            let rows = document.querySelectorAll("table tr");

            rows.forEach(function (row) {
                let rowData = [];
                let cols = row.querySelectorAll("td, th");

                cols.forEach(function (col) {
                    rowData.push(col.innerText);
                });

                csvContent += rowData.join(",") + "\n";
            });

            let encodedUri = encodeURI(csvContent);
            let link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "employee_report.csv");
            document.body.appendChild(link);
            link.click();
        }
    })

    function delete_employee($id) {
        // Your existing delete function
    }
</script>
{% endblock %}
